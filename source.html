<!DOCTYPE HTML>
<html lang=en>
<meta charset=utf-8>
<title>Dates and times</title>
<link rel=stylesheet href=spec.css>

<header>
<hgroup>
<h1 class="no-toc no-num">Dates and times</h1>
<h2 class="no-toc no-num">The manakai project, [DATE]</h2>
</hfroup>

<dl>

<dt>Latest version
<dd><a href="https://manakai.github.io/spec-numbers/">https://manakai.github.io/spec-datetime/</a>

<dt>Version history
<dd><a href="https://github.com/manakai/spec-datetime/commits/gh-pages">https://github.com/manakai/spec-datetime/commits/gh-pages</a>

</dl>

</header>

<section id=abstract>
<h1 class="no-toc no-num">Abstract</h1>

<p>This document defines date and time formats and algorithms.

</section>

<section>
<h1 class="no-toc no-num">Table of contents</h1>

<!-- toc -->
</section>

<section>
<h1>Terminology</h1>

<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked
non-normative. Everything else in this specification is normative.

<p>The key words “<em class=rfc2119>MUST</em>”<!--,
“<em class=rfc2119>MUST NOT</em>”,
“<em class=rfc2119>SHOULD</em>”, and “<em class=rfc2119>MAY</em>”
--> in the normative parts of this document are to be interpreted as
described in <a href=https://tools.ietf.org/html/rfc2119>RFC 2119</a>.

<p>Requirements phrased in the imperative as part of algorithms (such
as “strip any leading space characters” or “return false and abort
these steps”) are to be interpreted with the meaning of the key word
(e.g. “<em class=rfc2119>MUST</em>”) used in introducing the
algorithm.

<p>Conformance requirements phrased as algorithms or specific steps
<em class=rfc2119>MAY</em> be implemented in any manner, so long as
the end result is equivalent.  (In particular, the algorithms defined
in this specification are intended to be easy to follow, and not
intended to be performant.)

<p>The term
<a href=https://html.spec.whatwg.org/#ascii-digits><dfn>ASCII
digits</dfn></a> is defined by the
<a href=https://html.spec.whatwg.org/><cite>HTML Standard</cite></a>.

<p>The term
<a href=https://encoding.spec.whatwg.org/#utf-8><dfn>utf-8</dfn></a>
is defined by the
<a href=https://encoding.spec.whatwg.org/><cite>Encoding
Standard</cite></a>.

</section>

<section>
<h1>Common definitions</h1>

<p>A string is a <dfn>YMD string</dfn> of a tuple
(<var>year</var>, <var>month</var>, <var>day</var>) if it consists of
the following components in the given order:

  <ol>

  <li>A <span>year string</span> representing <var>year</var>
 
  <li>A <code>U+002D</code> <code class=charname>HYPHEN-MINUS
  character</code> (<code>-</code>)

  <li>Two <span>ASCII digits</span> representing <var>month</var> in
  decimal

  <li>A <code>U+002D</code> <code class=charname>HYPHEN-MINUS
  character</code> (<code>-</code>)

  <li>Two <span>ASCII digits</span> representing <var>day</var> in
  decimal

  </ol>

<p>A string is a <dfn>year string</dfn> representing a
year <var>year</var>, if it consists of the following components in
the given order:

  <ol>

  <li>If <var>year</var> is less than zero (0):

    <ol>

    <li>A <code>U+002D</code> <code class=charname>HYPHEN-MINUS
    character</code> (<code>-</code>)
    
    <li>Four or more <span>ASCII digits</span> representing
    &minus;<var>year</var> in decimal

    </ol>

  <li>Otherwise, four or more <span>ASCII digits</span>
  representing <var>year</var> in decimal

  </ol>

<div class=note>
<p>Note that the year just before year 1 is year 0, not year -1.
</div>

</section>

<section>
<h1>Gregorian calendar</h1>

<p>A <dfn>Gregorian day</dfn> is identified by a tuple of a year
number, a month number, and a day number.  The year number is an
integer.  The month number is an integer in the range [1, 12].  The
day number is an integer in the range [1, 31].

<div class=note>
<p>Not all months have the days 29, 30, and 31.
</div>

<p>A string is a <dfn>Gregorian date string</dfn> of a <span>Gregorian
day</span> (<var>year</var>, <var>month</var>, <var>day</var>) if it
is a <span>YMD string</span> of the tuple
(<var>year</var>, <var>month</var>, <var>day</var>).

<div class=note>
<p>If it represents a valid day and <var>year</var> is in the range
[1, 9999], it is also a
<a href=https://html.spec.whatwg.org/#valid-date-string>valid date
string</a>.
</div>

</section>

<section>
<h1>Julian calendar</h1>

<p>A <dfn>Julian day</dfn> is identified by a tuple of a year number,
a month number, and a day number.  The year number is an integer.  The
month number is an integer in the range [1, 12].  The day number is an
integer in the range [1, 31].

<div class=note>
<p>Not all months have the days 29, 30, and 31.
</div>

<p>A string is a <dfn>Julian date string</dfn> of a <span>Julian
day</span> (<var>year</var>, <var>month</var>, <var>day</var>) if it
is a <span>YMD string</span> of the tuple
(<var>year</var>, <var>month</var>, <var>day</var>).

</section>

<section>
<h1>Kyuureki</h1>

<p>A <dfn>kyuureki day</dfn> is identified by a tuple of a year
number, a month number, a boolean flag, and a day number.  The year
number is an integer.  The month number is an integer in the range [1,
12], where the value 1 represents the 正月.  If the boolean flag
is <i>true</i>, the month is a leap month.  Otherwise, it is not a
leap month.  The day number is an integer in the range [1, 30], where
the value 1 represents the 朔日 of the month.

<div class=note>
<p>Not all months have the day 30.
</div>

<p>A string is a <dfn>kyuureki date string</dfn> of a <span>kyuureki
day</span> (<var>year</var>, <var>month</var>, <var>is leap
month</var>, <var>day</var>) if it consists of the following
components in the given order:

  <ol>

  <li>A <span>year string</span> representing <var>year</var>
 
  <li>A <code>U+002D</code> <code class=charname>HYPHEN-MINUS
  character</code> (<code>-</code>)

  <li>Two <span>ASCII digits</span> representing <var>month</var> in
  decimal

  <li>If <var>is leap month</var> is <i>true</i>, a
  <code>U+0027</code> <code class=charname>APOSTROPHE</code> character
  (<code>'</code>)

  <li>A <code>U+002D</code> <code class=charname>HYPHEN-MINUS
  character</code> (<code>-</code>)

  <li>Two <span>ASCII digits</span> representing <var>day</var> in
  decimal

  </ol>

</section>

<section>
<h1>File format</h1>

<p>A <dfn>date mapping file</dfn> is a file consist of zero of lines.
A line consists of two slots separated by a <code>0x09</code> byte,
followed by a <code>0x0A</code> byte.  A line represents an entry in
the mapping, where the first slot represents the source of the entry
and the second slot represents the destination of the entry.  The
values in the slots are encoded by <span>utf-8</span>.
</section>

<section>
<h1 class=no-num>Data files</h1>

<p><i>This section is non-normative.</i>

<p class=XXX>There are
<a href=https://github.com/manakai/data-chars/blob/master/data/number-values.json>a
JSON data file</a> on <span title=value>values</span> of characters
defined in this document and
<a href=https://github.com/manakai/data-chars/blob/master/data/tests/cjk-numbers.json>a
JSON test data file</a> for the <span>parse a CJK number</span>
algorithm
(<a href="https://github.com/manakai/data-chars/blob/master/doc/number-values.txt">documentation</a>).

<p class=XXX>There is an
implementation: <a href="https://github.com/wakaba/perl-number-cjk">perl-number-cjk</a>.

</section>

<section>
<h1 class=no-num>Author</h1>

<p>This document is written
by <a href="http://suika.suikawiki.org/~wakaba/who?">Wakaba</a>
&lt;wakaba@suikawiki.org>.

<p>This document is developed as part of
<a href="https://manakai.github.io/">the manakai project</a>.

<p>Per <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>,
to the extent possible under law, the author has waived all copyright
and related or neighboring rights to this work.

</section>
